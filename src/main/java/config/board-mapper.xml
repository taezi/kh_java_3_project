<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.boardMapper">
  <select id="AllBoard" resultType="dto.boardDTO">
    select * from
    (select
    row_number() over(order by b.bno desc) as rw, b.*
	from board b)
	where ceil(rw / #{pageContentEa}) = #{pageNo}
  </select>
  
  <select id="SelectBoardTotalCount" resultType="int">
	select count(*) from board
  </select>
  
  	<select id="selectBoardNo" resultType="int">
		select seq_board_bno.nextval from dual
	</select>
	
	<insert id="insertBoard">
	  insert into board(bno, usersid, titles, bpost)
	  values(#{bno}, #{usersId}, #{titles}, #{bpost})
	</insert>
  
  
  <!-- update문인데 select문 써둬서 주석처리해뒀습니다
  <update id="UpdateBoardCount">
	select * from board
  </update>
  -->
  
  <select id="BoardView" resultType="dto.boardDTO">
	select * from board where bno = #{bno}
  </select>
  
  <select id="BoardCommentView" resultType="dto.boardCommentDTO">
  	<![CDATA[
  			select * from
			(select row_number() over(order by bcno desc) as rw, bc.* 
			from board_comment bc where bno = #{bno})
			where rw <= #{page} * 5 
		]]>
  </select>
</mapper>